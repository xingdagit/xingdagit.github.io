{"tags":[{"name":"jQuery","permalink":"http://yoursite.com/tags/jQuery/","url":"\\async\\tags\\jQuery.json","count":9}],"categories":[],"url":"\\async\\posts\\2017\\06\\12\\jQuery-DOM.json","date":1497237789000,"path":{"year":2017,"month":6,"day":12,"name":"jQuery-DOM"},"title":"jQuery-DOM","permalink":"http://yoursite.com/2017/06/12/jQuery-DOM/","content":"<h3 id=\"jQuery动态操作DOM\"><a href=\"#jQuery动态操作DOM\" class=\"headerlink\" title=\"jQuery动态操作DOM\"></a>jQuery动态操作DOM</h3><ul>\n<li>用选择器拿到了jQuery对象之后做什么呢——–操作对应的DOM节点</li>\n<li>用jQuery对象操作DOM，可改善JavaScript操作DOM的许多不足，而且不需要考虑浏览器差异了，全部统一操作。</li>\n<li>一个jQuery对象可以包含(选择)0个或任意个DOM对象，它的方法实际上会作用在对应的每个DOM节点上。 </li>\n<li>jQuery对象有“批量操作”的特点。</li>\n<li>jQuery对象的所有方法都返回一个jQuery对象（可能是新的也可能是自身），因此可设置<code>var 变量名=$(‘….’);</code>，再利用该变量名来调用方法。</li>\n</ul>\n<h3 id=\"1-创建DOM节点和节点属性\"><a href=\"#1-创建DOM节点和节点属性\" class=\"headerlink\" title=\"1.创建DOM节点和节点属性\"></a>1.创建DOM节点和节点属性</h3><p>创建的流程：<br>  1.创建节点（如元素、属性和文本）<br>  2.添加节点的一些属性<br>  3.加入到文档中<br>先回顾使用javascript原生方法<br>  1)创建元素：<code>document.createElement</code><br>  2)设置属性：<code>setAttribute</code><br>  3)添加文本：<code>innerHTML</code><br>  4)加入文档：<code>appendChild</code><br>原生方法的一些问题：<br>  1、每一个元素节点都必须单独创建<br>  2、节点是属性需要单独设置，而且设置的接口不是很统一<br>  3、添加到指定的元素位置不灵活<br>  4、最后还有一个最重要的：浏览器兼容问题处理<br>使用jQuery的方法<br>  1.创建元素节点：<br>  一般是通过<code>$()函数</code>处理，并直接把要创建节点的结构通过<code>HTML标记字符串</code>描述出来。<br>  语法：<code>$(&quot;html结构&quot;)</code>，如<code>$(&quot;&lt;div&gt;&lt;/div&gt;&quot;)</code><br>  2.创建为本节点：<br>  方法与创建元素节点类似，可以直接把文本内容一并描述。<br>  如 <code>$( &quot;&lt;div&gt;我是文本节点&lt;/div&gt;&quot; )</code><br>  3.创建为属性节点：<br>  与创建元素节点同样的方式。<br>  如 <code>$( &quot;&lt;div id=&#39;test&#39; class=&#39;aaron&#39;&gt;我是文本节点&lt;/div&gt;&quot; )</code></p>\n<h3 id=\"2-DOM节点的添加-插入\"><a href=\"#2-DOM节点的添加-插入\" class=\"headerlink\" title=\"2.DOM节点的添加(插入)\"></a>2.DOM节点的添加(插入)</h3><p>上面方法只是创建了元素节点，它只是临时存放在内存中，还没有加入到文档中。<br>加入到文档中就需要添加DOM节点，这涉及到一个位置关系。常见的就是把这个新创建的元素，当作页面某一个元素的子元素放到其内部。<br>如果要添加的DOM节点已经存在于HTML文档中，它会首先从文档移除，然后再添加，相当于<code>移动</code>一个DOM节点。</p>\n<p>一、内部末尾添加DOM节点<br>对存在<code>父子、祖辈关系</code>的节点可实现<code>内部添加DOM节点</code>;<br>jQuery定义了2个方法来实现<code>内部末尾添加DOM节点</code>：</p>\n<ol>\n<li><code>append(content)方法</code>：<br>作用：向每个匹配的元素内部<code>追加</code>内容；<br>调用者是<code>被插入的对象</code>；<br>参数为<code>在对象内插入的元素内容</code>；<br>与原生的<code>appendChild方法</code>类似；</li>\n<li><code>appendTo(content)方法</code><br>作用：把所有匹配的元素<code>追加</code>到另一个指定的元素/元素集合中；<br>实际上这个方法颠倒了上面的<code>$(A).append(B)</code>方法操作，即不是把B追加到A中，而是把A追加到B中；<br>调用者是<code>要插入的元素内容</code>;<br>参数为<code>被插入的对象</code>；</li>\n</ol>\n<p>二、内部前头添加DOM节点<br>对存在<code>父子、祖辈关系</code>的节点可实现<code>内部添加DOM节点</code>;<br>jQuery定义了2个方法来实现<code>内部前头添加DOM节点</code>：</p>\n<ol>\n<li><code>prepend(content)方法</code>：<br>作用：向每个匹配的元素内部<code>前置</code>内容；</li>\n<li><code>prependTo(content)方法</code>：<br>作用：把所有匹配的元素<code>前置</code>到另一个指定的元素/元素集合中</li>\n</ol>\n<p>三、外部添加DOM节点<br>对存在<code>兄弟关系</code>的节点可实现<code>外部添加DOM节点</code>;<br>jQuery定义了2个方法来实现外部添加DOM节点：</p>\n<ol>\n<li><code>after(content)方法</code>：<br>作用：在匹配元素集合中的每个元素后面插入参数所指定的内容，作为其兄弟节点；<br>after向元素的后边添加html代码，如果元素后面有元素了，那将后面的元素后移，然后将html代码插入</li>\n<li><code>before(content)方法</code>：<br>作用：根据参数在匹配元素的前面插入内容<br>before向元素的前边添加html代码，如果元素前面有元素了，那将前面的元素前移，然后将html代码插入<br>两种方法的相同点：<br>1)都是用来对相对选中元素外部增加相邻的兄弟节点<br>2)都可以接收<code>HTML字符串，DOM元素，元素数组，或者jQuery对象</code>为参数，用来插入到集合中每个匹配元素的前面或者后面<br>3)都支持多个参数传递，如<code>after(div1,div2,....)</code><br>还有insertAfter()与insertBefore()两种方法，只是调用对象与参数不同</li>\n</ol>\n<p>四、实例：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;div id=&quot;test-div&quot;&gt;</div><div class=\"line\">  &lt;ul&gt;</div><div class=\"line\">     &lt;li&gt;&lt;span&gt;JavaScript&lt;/span&gt;&lt;/li&gt;</div><div class=\"line\">     &lt;li&gt;&lt;span&gt;Python&lt;/span&gt;&lt;/li&gt;</div><div class=\"line\">     &lt;li&gt;&lt;span&gt;Swift&lt;/span&gt;&lt;/li&gt;</div><div class=\"line\">  &lt;/ul&gt;</div><div class=\"line\"> &lt;/div&gt;</div><div class=\"line\"> /*****************向列表新增一个语言*******************/ </div><div class=\"line\"> var ul = $(&apos;#test-div&gt;ul&apos;);  //先拿到`&lt;ul&gt;`节点 </div><div class=\"line\"></div><div class=\"line\"> //添加字符串(HTML片段):</div><div class=\"line\"> ul.append(&apos;&lt;li&gt;&lt;span&gt;Haskell&lt;/span&gt;&lt;/li&gt;&apos;); </div><div class=\"line\"></div><div class=\"line\"> // 添加DOM对象:</div><div class=\"line\"> var ps = document.createElement(&apos;li&apos;);//先创建</div><div class=\"line\"> ps.innerHTML = &apos;&lt;span&gt;Pascal&lt;/span&gt;&apos;;//赋值</div><div class=\"line\"> ul.append(ps);</div><div class=\"line\"></div><div class=\"line\"> // 添加jQuery对象:</div><div class=\"line\"> ul.append($(&apos;#scheme&apos;));</div><div class=\"line\"></div><div class=\"line\"> // 添加函数对象: </div><div class=\"line\"> //传入函数时，要求返回一个字符串、DOM对象或者jQuery对象。因为jQuery的append()可能作用于一组DOM节点，只有传入函数才能针对每个DOM生成不同的子节点。</div><div class=\"line\"> ul.append(function (index, html) &#123;</div><div class=\"line\">    return &apos;&lt;li&gt;&lt;span&gt;Language - &apos; + index + &apos;&lt;/span&gt;&lt;/li&gt;&apos;;</div><div class=\"line\"> &#125;);</div><div class=\"line\"> // 把新节点插入到指定位置，如插入到JavaScript和Python之间</div><div class=\"line\"> var js = $(&apos;#test-div&gt;ul&gt;li:first-child&apos;);  //先定位到JavaScript</div><div class=\"line\"> js.after(&apos;&lt;li&gt;&lt;span&gt;Lua&lt;/span&gt;&lt;/li&gt;&apos;);  //然后用after()方法</div></pre></td></tr></table></figure></p>\n<h3 id=\"3-DOM节点的删除\"><a href=\"#3-DOM节点的删除\" class=\"headerlink\" title=\"3.DOM节点的删除\"></a>3.DOM节点的删除</h3><p>jQuery提供了几种不同的方法用来移除页面上节点。<br><code>empty()方法</code>：</p>\n<ul>\n<li>作用：清空内部(后代)，即只移除指定元素中的所有子节点，调用对象本身仍留在DOM中</li>\n<li>移除所有子节点是指不仅移除子元素（和其他后代元素），也移除元素里的文本</li>\n<li>实例：<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">//HTML结构：</div><div class=\"line\">&lt;div class=&quot;hello&quot;&gt;&lt;p&gt;哈哈哈&lt;/p&gt;&lt;/div&gt;</div><div class=\"line\">/**************************************/</div><div class=\"line\">$(&apos;.hello&apos;).empty()//通过empty处理</div><div class=\"line\">//结果：&lt;div class=&quot;hello&quot;&gt;&lt;/div&gt; （即移除了&lt;p&gt;哈哈哈&lt;/p&gt;）</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><code>remove()方法</code>：</p>\n<ul>\n<li>作用：不仅移除元素内部的一切(包括绑定的事件及与该元素相关的jQuery数据)，也移除调用对象本身</li>\n<li>为了防止“内存泄漏”，常使用该方法去销毁事件。（绑定的事件在不用的时候要记得销毁）</li>\n<li>该方法还可以传递一个<code>选择器表达式</code>用来<code>过滤</code>将被移除的匹配元素集合，<code>选择性的</code>删除指定的节点<br>即通过<code>$()</code>选择一组相同的元素，然后通过<code>remove（）</code>传递筛选的规则</li>\n<li>实例：<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">//删除整个 class=test1的div节点：</div><div class=\"line\">$(&quot;.test1&quot;).remove()</div><div class=\"line\">//找到所有p元素中，过滤出包含了3的元素，再将其移除：</div><div class=\"line\">$(&quot;p&quot;).remove(&quot;:contains(&apos;3&apos;)&quot;)</div><div class=\"line\">//相当于$(&quot;p:contains(&apos;3&apos;)&quot;).remove();</div><div class=\"line\">//相当于$(&quot;p&quot;).filter(&quot;:contains(&apos;3&apos;)&quot;).remove()</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><code>detach()方法</code>：</p>\n<ul>\n<li>作用：临时删除页面上的节点。</li>\n<li>即保留节点上所有的数据与事件，且能在下一个时间段让这个删除的节点重新显示到页面（使用append()方法）</li>\n<li>注意：<code>detach方法</code>是JQuery特有的，所以它<code>只能</code>处理通过JQuery的方法绑定的事件或者数据</li>\n<li>语法与<code>remove()</code>一致，只是效果不太一样。</li>\n</ul>\n<h3 id=\"4-DOM节点的复制\"><a href=\"#4-DOM节点的复制\" class=\"headerlink\" title=\"4.DOM节点的复制\"></a>4.DOM节点的复制</h3><p><code>clone()方法</code></p>\n<ul>\n<li>用于<code>拷贝</code>DOM节点。即复制所有匹配的元素集合，包括所有匹配元素、匹配元素的下级元素、文字节点。</li>\n<li>无参数时所产生的克隆只是<code>浅克隆</code>，即元素数据（data）内对象和数组不会被复制，将继续被克隆元素和原始元素共享。<br>如节点有事件或者数据之类的其他处理，就需要通过<code>clone(ture)</code>产生深克隆，即不仅仅只是克隆单纯的节点结构，还要把附带的事件与数据给一并克隆了。</li>\n<li>可修改克隆后的元素或元素内容：<br><code>$(this).clone().css(&#39;color&#39;,&#39;red&#39;)</code></li>\n<li><code>clone()方法</code>是jQuery扩展的，只能处理通过jQuery绑定的事件与数据</li>\n<li><a href=\"http://www.imooc.com/code/10379\" target=\"_blank\" rel=\"external\">实例</a></li>\n</ul>\n<h3 id=\"5-DOM节点的替换\"><a href=\"#5-DOM节点的替换\" class=\"headerlink\" title=\"5.DOM节点的替换\"></a>5.DOM节点的替换</h3><p><code>replaceWith( newContent )方法</code></p>\n<ul>\n<li>用提供的内容<code>替换</code>集合中所有匹配的元素并且<code>返回</code>被删除(替换掉的)元素的集合</li>\n<li>如<code>$(&quot;p:eq(1)&quot;).replaceWith(&#39;&lt;a style=&quot;color:red&quot;&gt;替换第二段的内容&lt;/a&gt;&#39;)</code><br><code>replaceAll( target )方法</code></li>\n<li>用集合的匹配元素替换每个目标元素</li>\n<li>和<code>replaceWith()</code>功能类似，只是目标和源相反。</li>\n<li>如<code>$(&#39;&lt;a style=&quot;color:red&quot;&gt;替换第二段的内容&lt;/a&gt;&#39;).replaceAll(&#39;p:eq(1)&#39;)</code></li>\n</ul>\n<h3 id=\"6-DOM节点的包裹\"><a href=\"#6-DOM节点的包裹\" class=\"headerlink\" title=\"6.DOM节点的包裹\"></a>6.DOM节点的包裹</h3><p><code>wrap( wrappingElement )方法</code></p>\n<ul>\n<li>在集合中匹配的每个元素周围包裹一个HTML结构，即给它增加一个父元素。</li>\n<li>可以接受任何字符串或对象，也可以通过<code>$()函数</code>来指定一个DOM结构。这种结构可以嵌套了好几层深，但应该只包含一个核心的元素。每个匹配的元素都会被这种结构包裹。</li>\n<li>该方法返回原始的元素集，以便之后使用链式方法。</li>\n<li>如给p元素增加一个div包裹:<br><code>$(&#39;p&#39;).wrap(&#39;&lt;div&gt;&lt;/div&gt;&#39;)</code></li>\n</ul>\n<p><code>wrap( function )方法</code></p>\n<ul>\n<li>传入一个回调函数，返回用于包裹匹配元素的 HTML 内容或 jQuery 对象</li>\n<li>使用后的效果与直接传递参数是一样，只不过可以把代码写在函数体内部，写法不同而已</li>\n<li>如给p元素增加一个div包裹:<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">$(&apos;p&apos;).wrap(function() &#123; </div><div class=\"line\">  return &apos;&lt;div&gt;&lt;/div&gt;&apos;;</div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><code>unwrap()方法</code></p>\n<ul>\n<li>作用与wrap方法相反，即将匹配元素集合的父级元素删除，保留自身（和兄弟元素，如果存在）在原来的位置。</li>\n</ul>\n<p><code>wrapAll( wrappingElement )方法</code></p>\n<ul>\n<li>在集合中匹配的所有元素外面，增加一个包裹的HTML结构</li>\n<li>wrap()是针对单个dom元素处理，而这个方法是将集合中的元素用其他元素包裹起来，也就是给多个dom元素增加一个父元素。<br><code>wrapAll( function )方法</code></li>\n<li>传入一个回调函数，返回用于包裹匹配元素的 HTML 内容或 jQuery 对象</li>\n<li>使用效果与直接传递参数不一样，这种方法是通过回调的方式<code>单独处理每一个元素</code></li>\n</ul>\n<p><code>wrapInner( wrappingElement )方法</code></p>\n<ul>\n<li>在集合中匹配的所有元素内部，增加一个包裹的HTML结构</li>\n<li>实例：<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;div&gt;p元素&lt;/div&gt;</div><div class=\"line\">&lt;div&gt;p元素&lt;/div&gt;</div><div class=\"line\">/************************/</div><div class=\"line\">$(&apos;div&apos;).wrapInner(&apos;&lt;p&gt;&lt;/p&gt;&apos;) //给所有元素增加一个p包裹</div><div class=\"line\">/*****结果结构如下*******/</div><div class=\"line\">&lt;div&gt;</div><div class=\"line\">    &lt;p&gt;p元素&lt;/p&gt;</div><div class=\"line\">&lt;/div&gt;</div><div class=\"line\">&lt;div&gt;</div><div class=\"line\">    &lt;p&gt;p元素&lt;/p&gt;</div><div class=\"line\">&lt;/div&gt;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><code>wrapInner( function )方法</code></p>\n<ul>\n<li>允许用一个callback函数做参数，每次遇到匹配元素时，该函数被执行，返回一个DOM元素/jQuery对象/HTML片段，用来包住匹配元素的内容</li>\n<li>下面操作的结果结构与上面案例一样<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">$(&apos;div&apos;).wrapInner(function() &#123;</div><div class=\"line\">  return &apos;&lt;p&gt;&lt;/p&gt;&apos;; </div><div class=\"line\">&#125;)</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"7-DOM节点的遍历\"><a href=\"#7-DOM节点的遍历\" class=\"headerlink\" title=\"7.DOM节点的遍历\"></a>7.DOM节点的遍历</h3><h3 id=\"显示和隐藏DOM\"><a href=\"#显示和隐藏DOM\" class=\"headerlink\" title=\"显示和隐藏DOM\"></a>显示和隐藏DOM</h3><ul>\n<li>利用css()方法来设置CSS的display属性为none就可隐藏一个DOM。但要再显示这个DOM就需要恢复原有的display属性，这就要先记下来原有的display属性到底是block还是inline还是别的值。</li>\n<li>利用jQuery提供的<code>show()</code>和<code>hide()</code>方法，就不用关心其原display属性。</li>\n<li>注意：隐藏DOM节点并未改变DOM树的结构，它只影响DOM节点的显示。这和删除DOM节点不同。</li>\n<li>实例：<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">var a = $(&apos;a[target=_blank]&apos;);</div><div class=\"line\">a.hide(); // 隐藏</div><div class=\"line\">a.show(); // 显示</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"获取DOM信息\"><a href=\"#获取DOM信息\" class=\"headerlink\" title=\"获取DOM信息\"></a>获取DOM信息</h3><ul>\n<li>利用jQuery对象的若干方法，可直接获取DOM的高宽等信息，而无需针对不同浏览器编写特定代码。</li>\n<li>实例：<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">// 浏览器可视窗口大小:</div><div class=\"line\">$(window).width(); // 800</div><div class=\"line\">$(window).height(); // 600</div><div class=\"line\">// HTML文档大小:</div><div class=\"line\">$(document).width(); // 800</div><div class=\"line\">$(document).height(); // 3500</div><div class=\"line\">// 某个div的大小:</div><div class=\"line\">var div = $(&apos;#test-div&apos;);</div><div class=\"line\">div.width(); // 600</div><div class=\"line\">div.height(); // 300</div><div class=\"line\">div.width(400); // 设置CSS属性 width: 400px，是否生效要看CSS是否有效</div><div class=\"line\">div.height(&apos;200px&apos;); // 设置CSS属性 height: 200px，是否生效要看CSS是否有效</div></pre></td></tr></table></figure>\n</li>\n</ul>\n"}